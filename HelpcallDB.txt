drop database if exists Helpcall
create database Helpcall;
use Helpcall;
create table usuario(
idUsuario int not null auto_increment primary key,
login varchar(45),
senha varchar(45),
permissao enum('admin','gerente','visitante')
);
create table Porta(
quarto varchar(45) not null primary key,
num_controle int
);
create table MAC (
macadress varchar(45) primary key not null,
leito varchar(45),
status enum('0','1'),
quarto varchar(45),
foreign key (quarto) references Porta(quarto)
);
create table Chamado(
idChamado int not null auto_increment primary key,
status enum('0','1'),
horainit datetime,
horaend datetime,
MAC_idMAC varchar(45),
foreign key (MAC_idMAC) references MAC(macadress)
);

CREATE VIEW `chamado_ativo` AS SELECT chamado.status,horainit,MAC.leito,IdQuarto from Helpcall.chamado inner join MAC on MAC_idMAC = macadress where chamado.status = '1';


